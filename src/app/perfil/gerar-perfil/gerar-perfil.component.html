<div class="container">
  <h1>Perfil</h1><br>
  <nav class="navbar navbar-light bg-light">
    <div class="form-inline">
      <button class="btn btn-outline-success my-2 my-sm-0" [routerLink]="'/perfil'">
        Voltar
      </button>

    </div>
  </nav>
</div>


<div class="container" style="padding-top: 10px; width: 60%">
  <form [formGroup]="formulario" >

    <h2 style="padding-bottom: 30px;">Gerar Perfil</h2>



    <div class="row md-5" *ngIf="email$ | async as email; else loading">
      <label for="email" class="col-sm-2 col-form-label">Email:</label>
      <div class="col-sm-10">
        <select style="margin: 5px" id="email" class="form-control" formControlName="email"
          [ngClass]="{ 'is-invalid': submitted && hasError('email')}">
          <option *ngFor="let em of email" [ngValue]="em">{{ em.email }}</option>
        </select>
        <div class="invalid-feedback">
          Seleciona um email
        </div>
      </div>

    </div>

    <div class="row md-6">
      <label for="genero" class="col-sm-2 col-form-label">Genero:</label>
      <div class="col-sm-3">
        <select style="margin: 5px" id="genero" class="form-control" formControlName="genero"
          [ngClass]="{ 'is-invalid': submitted && hasError('genero')}">
          <option value="F">Feminino</option>
          <option value="M">Masculino</option>
        </select>
        <div class="invalid-feedback">
          Seleciona um Genero
        </div>
      </div>

      <div class="col-sm-2">
        <button style=" margin-top: 5px" class="btn btn-primary" (click)="onGerarPerfil()">Gerar</button>
      </div>
    </div>



    <div class="row md-6">
      <label for="username" class="col-sm-2 col-form-label">Username:</label>
      <div class="col-sm-10">
        <input style="margin: 5px" type="text" class="form-control" formControlName="username"
          placeholder="Digite o login" [ngClass]="{ 'is-invalid': submitted && hasError('username')}">
        <div class="invalid-feedback">
          Digite o Usernarme
        </div>
      </div>
    </div>

    <div class="row md-6">
      <label for="senha" class="col-sm-2 col-form-label">Senha:</label>
      <div class="col-sm-4">
        <input style="margin: 5px" type="text" class="form-control" formControlName="senha" placeholder="Digite a senha"
          [ngClass]="{ 'is-invalid': submitted && hasError('senha')}" >
        <div class="invalid-feedback">
          Digite a Senha
        </div>
      </div>
      <label for="genero" class="col-sm-2 col-form-label">Dispositivo:</label>
      <div class="col-sm-4">
        <input style="margin: 5px" type="text" class="form-control" formControlName="dispositivo"
          placeholder="Digite o dispositivo" [ngClass]="{ 'is-invalid': submitted && hasError('dispositivo')}"
          >
        <div class="invalid-feedback">
          Digite o dispositivo
        </div>
      </div>
    </div>

    <div class="row md-6">
      <label for="biografia" class="col-sm-2 col-form-label">Biografia:</label>
      <div class="col-sm-10">
        <input style="margin: 5px" type="text" class="form-control" formControlName="biografia">
      </div>
    </div>

    <div class="row md-6">
      <label for="nome" class="col-sm-2 col-form-label">Nome:</label>
      <div class="col-sm-10">
        <input style="margin: 5px" type="text" class="form-control" formControlName="nome"
          placeholder="Digite o nome" [ngClass]="{ 'is-invalid': submitted && hasError('nome')}"
          >
        <div class="invalid-feedback">
          Digite o Nome
        </div>
      </div>
    </div>

    <div class="row md-6">
      <label for="sobrenome" class="col-sm-2 col-form-label">SobreNome:</label>
      <div class="col-sm-10">
        <input style="margin: 5px" type="text" class="form-control" formControlName="sobrenome"
          placeholder="Digite o sobrenome" [ngClass]="{ 'is-invalid': submitted && hasError('sobrenome')}"
          >
        <div class="invalid-feedback">
          Digite o sobrenome
        </div>
      </div>
    </div>

    <button style="float:right; margin-top: 10px" (click)="onSubmit()" type="submit" class="btn btn-primary">Salvar</button>



  </form>
</div>

<ng-template #loading>
  <div class="spinner-border" role="status">
    <span class="sr-only">Loading...</span>
  </div>
</ng-template>
